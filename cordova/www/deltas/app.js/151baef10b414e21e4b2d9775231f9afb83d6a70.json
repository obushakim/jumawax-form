["function _796fa7bc799366fb5343c35215b5558f4635e306",50,27740,"store){suwe.store",27777,417765,"JsonP",280943,41,"JSONP',singleton:!0,requestCount:0,requests:{},timeout:3000",75888,46,"callbackKey:'callback',request:function(a){a=Ext.apply({},a);var b=this,k=Ext.isDefined(a.disableCaching)?a.disableCaching:b.disableCaching,l=a.disableCachingParam||b.disableCachingParam,f=++b.requestCount,e=a.callbackName||'callback'+f,g=a.callbackKey||b.callbackKey,h=Ext.isDefined(a.timeout)?a.timeout:b.timeout,d=Ext.apply({},a.params),j=a.url,m=Ext.isSandboxed?Ext.getUniqueGlobalNamespace():'Ext',c,i;d[g]=m+'.data.JsonP.'+e;if(k){d[l]=(new Date()).getTime()}i=b.createScript(j,d,a);b.requests[f]=c={url:j,params:d,script:i,id:f,scope:a.scope,success:a.success,failure:a.failure,callback:a.callback,callbackKey:g,callbackName:e};if(h>0){c.timeout=setTimeout(Ext.bind(b.handleTimeout,b,[c]),h)}b.setupErrorHandling(c);b[e]=Ext.bind(b.handleResponse,b,[c],!0);b.loadScript(c);return c},abort:function(a){var b=this.requests,c;if(a){if(!a.id){a=b[a]}this.handleAbort(a)}else ",49823,37,"this.abort(b[c])}}}},setupErrorHandling:function(a){a.script.onerror=Ext.bind(this.handleError,this,[a])},handleAbort:function(a){a.errorType='abort';this.handleResponse(null,a)},handleError:function(a){a.errorType='error';this.handleResponse(null,a)},cleanupErrorHandling:function(a){a.script.onerror=null},handleTimeout:function(a){a.errorType='timeout';this.handleResponse(null,a)},handleResponse:function(c,a){var b=!0;if(a.timeout){clearTimeout(a.timeout)}delete this[a.callbackName];delete this.requests[a.id];this.cleanupErrorHandling(a);Ext.fly(a.script).destroy();if(a.errorType){b=!1",316287,33,"a.errorType,a])}else {",316114,38,310798,33,"b,c,a.errorType,a])},createScript:function(c,b,d",87663,32,"script');a.setAttribute('src',Ext.urlAppend(c,Ext.Object.toQueryString(b)));a.setAttribute('async',!0);a.setAttribute('type','text/javascript');return a},loadScript:function(a){Ext.getHead().appendChild(a.script)}},0,0,0,0,0,0,[Ext.data,'JsonP',Ext.util,'JSONP'],0",445515,1224,"proxy.JsonP",400303,44,"'Ext.data.ScriptTagProxy',config:{defaultWriterType:'base',callbackKey:'callback',recordParam:'records',autoAppendParams:!0",400549,32,"b=this,a=b.buildRequest(c),e=a.getParams();a.setConfig({callbackKey:b.getCallbackKey(),timeout:b.getTimeout(),scope:b,callback:b.createRequestCallback(a,c,d,f)});if(b.getAutoAppendParams()){a.setParams({})}a.setJsonP(Ext.data.JsonP.request(a.getCurrentConfig()));a.setParams(e);c.setStarted();b.lastRequest=a;return a",401079,33,"d,b,c,e){var a=this;return function(g,f,h){delete a.lastRequest;a.processResponse(g,b,d,f,c,e)}},setException:function(a,b){a.setException(a.getRequest().getJsonP().errorType)},buildUrl:function(g){var h=this,a=Ext.data.proxy.Server.prototype.buildUrl.apply(this,arguments),e=Ext.apply({},g.getParams()),b=e.filters,d,c,f;delete e.filters;if(h.getAutoAppendParams()){a=Ext.urlAppend(a,Ext.Object.toQueryString(e))}if(b&&b.length){for(c=0;c<b.length;c++){d=b[c];f=d.getValue();if(f){a=Ext.urlAppend(a,d.getProperty()+'='+f)}}}return a},destroy:function(){this.abort();Ext.data.proxy.Serv",466528,42,"},abort:function(){var a=this.lastRequest;if(a){Ext.data.JsonP.abort(a.getJsonP())}}},0,0,0,0,['proxy.jsonp','proxy.scripttag'],0,[Ext.data.proxy,'JsonP',Ext.data,'ScriptTag",392537,36,446739,149421,"store.PJPFormStore',Ext.data.Store,{config:{fields:['pjpId','storeCode','skuId','collectDtm','oosPromo','oos','msg','catalogueId'],autoDestroy:!0,proxy:{type:'jsonp',url:'http://192.168.1.100:8080/jumawax-web/visit/plan/oos',callbackKey:'callback'},listeners:{beforeload:function(b,a){},load:function(a,b){console.log('SKUStore data= '+a.getCount())}}}},0,0,0,0,0,0,[suwe.store,'PJPFormSto",597342,34,596165,2252,"a){var b=a.up('panel');b",599436,57,",a.getId()",598498,642,"var b=a.up('panel');b",599436,57,",a.getId())",599140,186,"button',itemId:'PJPFormButton',text:'Send',ui:'confirm',handler:function(){var d=this.up('main'),a=d.getValues(),c",599758,33,".getSrc(),b",599821,38,".getSrc();a.promoImg=c;a.competitorImg=b;this.up('main').submit(a)}",599316,1175,"getPhoto:function(b,c",600344,41,"function(b){a.successGetPicture(b,c)}",600394,104,"GetPicture:function(b,c){var a;if(c=='promoCamera'){a",600516,51,",a.setSrc(b)}else {if(c=='competitorCamera'){a=Ext.ComponentQuery.query('#competitorCameraPreview')[0];a.setSrc(b)}else {alert('error')}}},submit:function(a){console.log(a);var b=this;var d=Ext.getStore('PJPFormStore');var c=new Date();var e=d.load({params:{pjpId:125001,storeCode:'ALF1411',skuId:'7777710',collectDtm:c,oosPromo:a.promoAvail,oos:a.itemAvail,oosPartial:a.otherShelfAvail},callback:function(c,d,e){if(c[0].data.msg=='SUCCESS'){if(a.promoImg||a.promoImg!==null){b.uploadImage(a.promoImg,1,a)}if(a.competitorImg||a.competitorImg!==null){b.uploadImage(a.competitorImg,2,a)}}}});Ext.Msg.alert('List','<ul><li>pjp id: 125001<li><li>store code: ALE14114<li><li>sku id: 7777710<li><li>item Available: '+a.itemAvail+'<li><li>promo Available: '+a.promoAvail+'<li><li>competitor Available: '+a.competitorAvail+'<li><li>other Shelf Available: '+a.otherShelfAvail+'<li><li>promo image: '+a.promoImg+'<li><li>competitor image: '+a.competitorImg+'<li></ul>',Ext.emptyFn)},uploadImage:function(b,d,f){var e=new FileTransfer();var a=new FileUploadOptions();a.headers={'Authorization':'Basic dGVzdHVzZXJuYW1lOnRlc3RwYXNzd29yZA=='};a.fileKey='file';a.fileName=b.substr(b.lastIndexOf('/')+1)+'-'+d+'-125001-7777710';var c={};c.pjpId='test';c.skuId='param';a.params=c;e.upload(b,encodeURI('http://192.168.1.100:8080/jumawax-web/file/upload'),function(a){Ext.Msg.alert('Title','SUKSES',Ext.emptyFn)},function(a){Ext.Msg.alert('Title','gagal',Ext.emptyFn)},a",600488,79,",g=Ext.ComponentQuery.query('#competitorCameraPreview')",600567,1986,"stores:['PJPFormStore",602550,759]